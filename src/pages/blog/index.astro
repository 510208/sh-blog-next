---
import { Image } from "astro:assets";
import { getCollection } from "astro:content";
import BaseHead from "../../components/core/BaseHead.astro";
import Footer from "../../components/core/Footer.astro";
import FormattedDate from "../../components/content/FormattedDate.astro";
import Header from "../../components/core/Header.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "../../consts";
import BaseLayout from "@/components/layouts/BaseLayout.astro";
import Hero from "@/components/content/Home/Hero.astro";
import BaseMainContent from "@/components/layouts/BaseMainContent.astro";
import Greeting from "@/components/content/Greeting.astro";
import { HeroTitle, HeroSubtitle } from "@/components/content/Home/HeroItems";

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<BaseLayout title={`Blog - ${SITE_TITLE}`} description={SITE_DESCRIPTION}>
  <!-- Hero Section -->
  <Hero>
    <!-- Left: Main heading -->
    <div class="lg:col-span-2" slot="left">
      <HeroTitle>文章列表</HeroTitle>
      <HeroSubtitle slot="right">
        我會把自己的所思所想記錄在這裡，<br />希望能對你有所幫助。
      </HeroSubtitle>
    </div>
  </Hero>
  <BaseMainContent>
    <ul
      class="grid grid-cols-1 lg:grid-cols-2 gap-8 list-none m-0 p-0 md:gap-2"
    >
      {
        posts.map((post) => (
          <li class="w-full md:text-center first:w-full first:mb-4 first:md:mb-0">
            <a
              href={`/blog/${post.id}/`}
              class="block no-underline transition-all duration-200"
            >
              {post.data.heroImage && (
                <Image
                  width={720}
                  height={360}
                  src={post.data.heroImage}
                  alt=""
                  class="mb-2 rounded-xl hover:shadow-lg first:w-full"
                />
              )}
              <h4 class="m-0 text-black dark:text-white leading-tight first:text-[2.369rem] md:first:text-[1.563rem] group-hover:text-accent">
                {post.data.title}
              </h4>
              <p class="m-0 text-gray-500 dark:text-gray-400 group-hover:text-accent">
                <FormattedDate date={post.data.pubDate} />
              </p>
            </a>
          </li>
        ))
      }
    </ul>
  </BaseMainContent>
</BaseLayout>
