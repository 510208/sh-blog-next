---
import { Button } from '@/components/ui/button';
import { ArrowUp } from 'lucide-react';
---

<Button
	client:load
	size="icon"
	variant="outline"
	className="fixed bottom-4 right-4 rounded-full w-12 h-12 shadow-lg hidden data-[show=true]:flex items-center justify-center"
	id="to-top-button"
	aria-label="Back to top"
>
	<ArrowUp className="w-6 h-6" />
</Button>

<script>
  document.addEventListener('astro:page-load', () => {
    const toTopButton = document.getElementById('to-top-button');

    if (!toTopButton) return;

    const toggleVisibility = () => {
      if (window.scrollY > 300) {
        toTopButton.setAttribute('data-show', 'true');
      } else {
        toTopButton.setAttribute('data-show', 'false');
      }
    };

    window.addEventListener('scroll', toggleVisibility);
    toggleVisibility(); // Call on load to set initial state

    toTopButton.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });
  });
</script>
