---
import { Hash, MoreHorizontal } from "lucide-react";
import { Badge } from "./ui/badge";

const { tags } = Astro.props;
---

{
  tags && tags.length > 0 ? (
    <div class="tags-list flex items-center gap-2">
      <a href={`/blog/tags/${tags[0].toLowerCase()}`} class="tag-link">
        <Badge variant="secondary" className="px-2 text-sm" client:only>
          <Hash size={14} />
          {tags[0]}
        </Badge>
      </a>

      {tags.length > 1 ? (
        <div class="relative inline-block group">
          <button
            class="tag-more inline-flex items-center px-2 py-1 rounded text-sm bg-neutral-800 hover:bg-neutral-700 transition"
            aria-haspopup="true"
          >
            <MoreHorizontal size={14} />
          </button>

          <div class="popover absolute left-0 mt-2 min-w-40 bg-neutral-900 border border-white/10 rounded-md p-2 shadow-lg opacity-0 scale-95 pointer-events-none transition-all group-hover:opacity-100 group-hover:scale-100 group-focus-within:opacity-100">
            <div class="flex flex-col gap-2">
              {tags.slice(1).map((tag: string) => (
                <a href={`/blog/tags/${tag.toLowerCase()}`} class="inline-flex">
                  <Badge
                    variant="secondary"
                    className="px-2 text-sm"
                    client:only
                  >
                    <Hash size={14} />
                    {tag}
                  </Badge>
                </a>
              ))}
            </div>
          </div>
        </div>
      ) : null}
    </div>
  ) : null
}
